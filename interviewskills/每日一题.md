* [session和cookies的区别是什么](#session和cookies的区别是什么)
    * [前言](#前言)
    * [什么是Cookie](#什么是Cookie)
    * [查看方法](#查看方法)
    * [什么是Session](#什么是Session)
    * [它们的区别--总结](#它们的区别总结)

# 7.12 Session和Cookie的区别是什么
## 前言

当用户在浏览器输入一个网址时，会从服务端返回给用户一个页面或者信息。那么**Session**就是浏览器和服务器之间的一次对话，比如浏览器问候“你好吗”，服务端回答：“你好”。
我们用浏览器打开一个网址，用的是**http协议**，而这种协议是**无状态**的，无状态就是这次请求和上次请求时无关联的，这种无状态的好处就在于能够快速访问。

那么有一次场景就是当用户访问http://a.com/login.html时，用户进行登录。那当我访问http://a.com/index.html时，我们也希望它是登陆状态，但这两个页面是http协议，http协议是无状态的，是没有关联的。
那我怎样获取登陆状态呢，一是每次登录用户时我都需要从数据库中去查找用户登录的状态并返回，但这种每次查询数据库是行不通的，会造成数据库的压力。正是这种诉求，cookie出现了，cookie是存在于浏览器端的，保存到数据库里。
每次登录我只需在浏览器上查找是否登录过就行，但这种方式是不安全的。因为cookie存在于浏览器端，用户可以随时修改。所以session就出来了，放在服务端，相对安全。

## 什么是Cookie
    `Cookie`意为“甜饼”，是由W3C组织提出，最早由Netscape社区发展的一种机制。目前Cookie已经成为标准，所有的主流浏览器如IE、Netscape、Firefox、Opera等都支持Cookie。
　　由于**HTTP**是一种**无状态**的协议，服务器单从网络连接上无从知道客户身份。怎么办呢？就给客户端们颁发一个通行证吧，每人一个，无论谁访问都必须携带自己通行证。这样服务器就能从通行证上确认客户身份了。这就是Cookie的工作原理。
　　Cookie实际上是一小段的文本信息。客户端请求服务器，如果服务器需要记录该用户状态，就使用response向客户端浏览器颁发一个Cookie。客户端浏览器会把Cookie保存起来。当浏览器再请求该网站时，浏览器把请求的网址连同该Cookie一同提交给服务器。服务器检查该Cookie，以此来辨认用户状态。服务器还可以根据需要修改Cookie的内容。

　　查看某个网站颁发的Cookie很简单。在浏览器地址栏输入`javascript:alert (document. cookie)`就可以了（需要有网才能查看）。

## 什么是Session

    **Session**是另一种记录客户状态的机制，不同的是Cookie保存在客户端浏览器中，而`Session保存在服务器`上。客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上,这就是Session。客户端浏览器再次访问时只需要从该Session中查找该客户的状态就可以了。
　　**如果说Cookie机制是通过检查客户身上的“通行证”来确定客户身份的话，那么Session机制就是通过检查服务器上的“客户明细表”来确认客户身份**。Session相当于程序在服务器上建立的一份客户档案，客户来访的时候只需要查询客户档案表就可以了

## 查看方法

### 方法一
    在浏览器的地址栏输入：`javascript:alert(document.cookie)` (不区分大小写)，就会弹出你在当前网页登录的cookie信息。输入时javascript会自动消失，所以需要输入1javascript:alert(document.cookie)，然后再删除1。

但这种方式我试过总是不行，不知道是哪里出现问题

### 方法二
    按F12进入浏览器的开发者模式——console——在命令行输入javascript:alert(document.cookie)，再回车，就可以在浏览器端查看弹出的信息了！
    
<img src="https://picturestr.oss-cn-shanghai.aliyuncs.com/img/20200713221426.png" align="center">
 
### 方法三 

   在Chrome中查看Cookie：点击url左边的文本图标， 单击cookie

<img src="https://picturestr.oss-cn-shanghai.aliyuncs.com/img/20200713221338.png" align="center">
   
## 它们的区别总结

+ 1.保存位置：
    session服务端，cookie客户端
    
+ 2.安全性：
    session相对安全，cookie相对不安全。
    
+ 3.存储类型：
    session能够存储任意的对象，cookie只能存储String类型的对象。
    
+ 4.大小限制：
    session没有大小限制，cookie有大小限制（4k）。
    
+ 5.个数限制：
    session没有个数限制，cookie个数限制（二十到几百个）。
    
+ 6.键值对：
    session是键值对嵌套键值对，cookie是键值对。
    
+ 7.用户禁用：
    session不能被用户禁用，cookie能被用户禁用。
    
+ 8.服务器压力：
    session压力大，cookie压力小。
    
+ 9.生命周期：session用户浏览器关闭，cookie可长期保存。

+ 10.区分路径：
    session不能区分路径,同一个用户在访问一个网站期间,所有的session在任何一个地方都可以访问到。而cookie中如果设置了路径参数,那么同一个网站中不同路径下的cookie互相是访问不到的.cookie只能是子路径访问父路径设置的cookie。

[推荐阅读:cookie和session的详解和区别](https://www.cnblogs.com/l199616j/p/11195667.html)

# 7.13 什么是索引回表，如何避免（索引覆盖）

## 什么是索引？
索引其实可以理解为书中的目录，就像你小时候用新华字典查单词一样，通过首字母依次查找想要的字幕。索引在mysql里面也叫键（key）是存储引擎用于快速快速查找记录的一种数据结构。

索引的一个主要目的就是加快检索表中数据，亦即能协助信息搜索者尽快的找到符合限制条件的记录ID的辅助数据结构。

# 7.14 es用过冷热分离吗？假如现在有些数据热变冷，有些数据冷变热，怎么解决？

## 
热变冷：
有x台机器tag设置为hot。
有y台机器tag设置为cool。
hot集群中只存最近两天的。
有一个定时任务每天将前一天的索引标记为cool。
es看到有新的标记就会将这个索引迁移到冷集群中, 这都是es自动完成的。

冷变热：
缓存预热。

# 7.15 死锁与活锁的区别，死锁与饥饿的区别？

